package pengyifan.bionlpst.parser;

import pengyifan.bionlpst.v2.Env;
import pengyifan.bionlpst.v2.FileProcessor;
import java.io.BufferedReader;
import java.io.InputStreamReader;


public class CharniakParser extends FileProcessor{

    private static final  String PARSER = "sh /home/leebird/nlp/parser/charniak/bllip-parser-master/parse.sh ";

    private String rawText;
    
    public static void main(String[] args)
        throws Exception {
        CharniakParser p = new CharniakParser();
        p.parse();
    }

public String parse()
    throws Exception {
    String parserOutput;
    String s;
    Runtime rt = Runtime.getRuntime();
    Process proc = rt.exec(PARSER+rawText);

    BufferedReader stdInput = new BufferedReader(new 
                                                 InputStreamReader(proc.getInputStream()));

    BufferedReader stdError = new BufferedReader(new 
                                                 InputStreamReader(proc.getErrorStream()));

    // System.out.println("Here is the standard output of the command:\n");
    while ((s = stdInput.readLine()) != null) {
        parserOutput += s;
    }

    // System.out.println("Here is the standard error of the command (if any):\n");
    while ((s = stdError.readLine()) != null) {
        // System.out.println(s);
    }
    return parserResult;
}

    @override
    public readResource(String indir, String outdir, String filenamee)
        {
            this rawText = indir + "/" + filename;
            String output = parse();
            try {
                PrintStream out = new PrintStream(new FileOutputStream(outdir
                                                                       + "/"
                                                                       + filename
                                                                       + ".ptb"));
                    out.println(output);
                    out.close();
            } catch (FileNotFoundException e) {
                e.printStackTrace();
                System.exit(1);
            }
        }
}